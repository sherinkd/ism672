@using NWTradersWeb.Models;
@model Customer

@{

    ViewBag.Title = "Analysis";
    Customer currentCustomer = Session["currentCustomer"] as Customer;

}

<div class="">

    <div class="container shadow navbar rounded-3 w3-animate-right" style="background-color:khaki; opacity:0.8">
        <div class="navbar ms-4">

            <h4 class="text-center ">
                Welcome @Model.CompanyName
            </h4>
        </div>

        <div class="nav me-2 border-secondary-subtle">
            <div class="btn w3-hover-shadow" title="View your orders and related details">
                @Html.ActionLink("Home", "Details", "Customers",
                    new { @id = currentCustomer.CustomerID },
                    new { @class = "text-decoration-none" })
            </div>

            <div class="btn w3-hover-shadow" title="View analysis">
                @Html.ActionLink("Analysis", "Analysis", "Customers",
                   new { @id = currentCustomer.CustomerID },
                   new { @class = "text-decoration-none" })
            </div>

        </div>
    </div>

    <div class="container mt-2">

        <ul class="nav nav-tabs small border-0">

            <li class="nav-item pl-2">
                <div class="w3-button w3-bottombar w3-hover-light-gray w3-hover-shadow rounded-2x"
                     onclick="AnnualSales();" id="AnnualSales" style="cursor:pointer"
                     title="Left for you to complete">
                    Annual Sales
                </div>
            </li>

            <li class="nav-item px-2">
                <div class="w3-button w3-bottombar w3-hover-light-gray w3-hover-shadow rounded-2x"
                     onclick="ForYouToComplete();" id="TopProducts" style="cursor:pointer"
                     title="Top Products Bought by @Model.CompanyName">
                    Top Products
                </div>
            </li>

            <li class="nav-item px-2">
                <div class="w3-button w3-bottombar w3-hover-light-gray w3-hover-shadow rounded-2x"
                     onclick="ForYouToComplete();" id="TopProductCategories" style="cursor:pointer"
                     title="Categories of the Top Products Bought by @Model.CompanyName">
                    Top Product Categories
                </div>
            </li>

            <li class="nav-item px-2">
                <div class="w3-button w3-bottombar w3-hover-light-gray w3-hover-shadow rounded-2x"
                     onclick="ForYouToComplete();" id="Discounts" style="cursor:pointer"
                     title="This can be here or on the details(Home) Page for the customer">
                    Valued Customer Discounts
                </div>
            </li>
        </ul>
    </div>

    <div class=" shadow-sm rounded-2x tab-pane mt-4 w3-animate-bottom">

        <!-- Partials are dropped into this container. -->
        <div id="Partials" class="" style="min-height:400px">

        </div>

    </div>

</div>


<script type="text/javascript">

    $(document).ready(function ()
    {

    });

     function AnnualSales()
    {
        $('#Partials').empty();

         //$('#Partials').html("<h4 class=text-center p-4 rounded-2x> From the new Annual Sales Function</h4>");

         $.ajax({
            url: '@Url.Action("AnnualSales", "Customers")',
            data: {CustomerID: '@Model.CustomerID' },

            success: function (result) { $('#Partials').html(result); },
            error: function () { $('#Partials').html('Something went wrong in Annual Orders'); }
        });
    }

     function TopProducts()
    {
         $('#Partials').empty();
         $.ajax({
            url: '@Url.Action("CustomerTopProducts", "Customers")',
            data: {},

            success: function (result) { $('#Partials').html(result); },
            error: function () { $('#Partials').html('Something went wrong in Customer Top Products'); }
        });
    }


    function TopCategories()
    {
         $('#Partials').empty();
         $.ajax({
            url: '@Url.Action("CustomerTopCategories", "Customers")',
            data: {},

            success: function (result) { $('#Partials').html(result); },
            error: function () { $('#Partials').html('Something went wrong in Customer Top Products'); }
        });
    }

    function ForYouToComplete()
    {
        $('#Partials').empty();
        $('#Partials').html("<h4 class=text-center p-4 rounded-2x> Left for you to complete </h4>");
    }


</script>
